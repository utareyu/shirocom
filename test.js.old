fetch('https://utareyu.github.io/shirocom/main.json')
  .then(response => response.json())
  .then(function(x){
		const dsel=1;
		for(i in Object.keys(x["data"][dsel]["cont"])){
			let d = x["data"][dsel]["cont"][i]["data"];
			const p = document.createElement('p');
			const a = document.createElement('a');
			const img = document.createElement('img');
			const dest = document.getElementById("hrp");
			
			// ---a処理
			let aTagv = "";
			let ahref=d.match(/http.*/g,'\n');
			if(ahref!=null){
				ahref=ahref[0].replace(/".*/g,'');
				if(ahref.length>=40){
					 aTagv=ahref.substr(0,26)+"…"+ahref.substr(ahref.length-20);
				}
				a.setAttribute("href",ahref);
				a.textContent=aTagv;
				dest.appendChild(a);
				continue;
			}

			// ---img処理
			// if(d.match(/.*img.*src=.*/g,'\n')){
			// 	img.innerHTML=d;
			// 	img.textContent="";
			// 	dest.appendChild(img);
			// 	continue;
			// }

			p.innerHTML=d;
			dest.appendChild(p);

		}
			console.log(Object.keys(x["data"][1]["cont"]).length);
	});